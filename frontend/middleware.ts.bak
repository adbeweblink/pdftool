import createMiddleware from 'next-intl/middleware'
import { locales, defaultLocale } from './i18n'

export default createMiddleware({
  // 支援的語言列表
  locales,
  // 預設語言
  defaultLocale,
  // 使用 cookie 來偵測/儲存語言偏好
  localeDetection: true,
  // 不要在 URL 中顯示語言前綴（使用 cookie 方式）
  localePrefix: 'never'
})

export const config = {
  // 匹配所有頁面路徑，但排除 api、static files 等
  matcher: [
    // 匹配所有頁面路徑
    '/((?!api|_next|_vercel|.*\\..*).*)'
  ]
}
